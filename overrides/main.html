{% extends "base.html" %}

{% block announce %}
<a href="/projects/oreilly_deep_learning_at_scale/">
        <strong>üéâ New Book Release!</strong> Check out "Deep Learning at Scale" - An O'Reilly Book
</a>
{% endblock %}

{% block content %}
{{ super() }}
<script>
        // Add back to top button
        document.addEventListener('DOMContentLoaded', function () {
                const backToTop = document.createElement('button');
                backToTop.innerHTML = '‚Üë';
                backToTop.className = 'back-to-top';
                backToTop.style.cssText = `
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--md-primary-fg-color);
        color: var(--md-primary-bg-color);
        border: none;
        cursor: pointer;
        display: none;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        z-index: 1000;
      `;
                document.body.appendChild(backToTop);

                window.addEventListener('scroll', function () {
                        if (window.pageYOffset > 100) {
                                backToTop.style.display = 'flex';
                        } else {
                                backToTop.style.display = 'none';
                        }
                });

                backToTop.addEventListener('click', function () {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                });
        });

        // Add reading time estimation
        document.addEventListener('DOMContentLoaded', function () {
                const article = document.querySelector('article');
                if (article) {
                        const text = article.textContent;
                        const wordCount = text.split(/\s+/).length;
                        const readingTime = Math.ceil(wordCount / 200); // Assuming 200 words per minute
                        const readingTimeElement = document.createElement('div');
                        readingTimeElement.className = 'reading-time';
                        readingTimeElement.innerHTML = `‚è±Ô∏è ${readingTime} min read`;
                        readingTimeElement.style.cssText = `
          position: absolute;
          top: 0;
          right: 0;
          padding: 8px;
          font-size: 0.8em;
          color: var(--md-default-fg-color--light);
        `;
                        article.insertBefore(readingTimeElement, article.firstChild);
                }
        });

        // Add progress bar
        document.addEventListener('DOMContentLoaded', function () {
                const progressBar = document.createElement('div');
                progressBar.className = 'reading-progress';
                progressBar.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        height: 3px;
        background: var(--md-primary-fg-color);
        z-index: 1000;
        transition: width 0.2s ease;
      `;
                document.body.appendChild(progressBar);

                window.addEventListener('scroll', function () {
                        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                        const scrolled = (winScroll / height) * 100;
                        progressBar.style.width = scrolled + '%';
                });
        });
</script>

<style>
        /* Mobile responsiveness improvements */
        @media screen and (max-width: 76.1875em) {
                .md-nav--primary .md-nav__title {
                        background: var(--md-primary-fg-color);
                        color: var(--md-primary-bg-color);
                }

                .md-nav--primary .md-nav__title[for="__drawer"] {
                        background: var(--md-primary-fg-color);
                        color: var(--md-primary-bg-color);
                }
        }

        /* Improve code block appearance */
        .md-typeset pre>code {
                padding: 1em;
                border-radius: 4px;
        }

        /* Enhance admonition boxes */
        .md-typeset .admonition {
                border-radius: 4px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Improve table appearance */
        .md-typeset table {
                border-radius: 4px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Enhance link appearance */
        .md-typeset a {
                color: var(--md-primary-fg-color);
                text-decoration: none;
                border-bottom: 1px solid var(--md-primary-fg-color);
                transition: border-bottom-color 0.2s ease;
        }

        .md-typeset a:hover {
                border-bottom-color: transparent;
        }

        /* Improve heading appearance */
        .md-typeset h1 {
                color: var(--md-primary-fg-color);
                font-weight: 700;
        }

        /* Add smooth scrolling */
        html {
                scroll-behavior: smooth;
        }

        /* Improve mobile navigation */
        @media screen and (max-width: 76.1875em) {
                .md-nav--primary .md-nav__title {
                        background: var(--md-primary-fg-color);
                        color: var(--md-primary-bg-color);
                }
        }
</style>
{% endblock %}